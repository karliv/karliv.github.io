@import ./attach
.lm-m-messages
  background-color: $lm-gray-5
  top: 0
  left: 0
  right: 0
  bottom: 0
  margin: auto
  display: flex
  align-items: center
  justify-content: space-between
  flex-direction: column

  &.lm-m-messages-show
    position: fixed
  .lm-m-messages-head
    width: 100%
    flex: 1 1 auto
    min-height: 56px
    max-height: 56px
    height: 56px
    box-sizing: border-box
    .center
      text-align: center
    .lm-more-icon
      @include lm-more('%23000000')
      transform: rotate(180deg)
    .text-status
      font-size: 12px
      line-height: 15px
      letter-spacing: normal
      color: $lm-gray-3
      text-align: center
  .lm-m-dialog-wrap
    flex: 1 auto
    display: flex
    justify-content: flex-end
    width: 100%
    flex-direction: column
    .lm-m-dialog-footer
      background-color: $lm-white
      .lm-m-dialog-attaches
        background-color: $lm-white
        margin: 3px 16px 8px
        display: flex
        justify-content: flex-start
        overflow-x: scroll
        overflow-y: hidden
        -webkit-overflow-scrolling: touch
        .lm-m-dialog-attach
          width: 48px
          min-width: 48px
          margin-top: 4px
          height: 36px
          border-radius: 6px
          position: relative
          margin-right: 6px
          .lm-close
            width: 12px
            height: 12px
            background-color: $lm-support-1
            border-radius: 50%
            overflow: hidden
            background-size: 6px
            background-position: center
            background-repeat: no-repeat
            display: block
            position: absolute
            top: -2px
            right: -2px
            cursor: pointer
            @include lm-close('%23ffffff')
          &.document
            background-color: $lm-support-4
            @include lm-single-folded-content('%23ffffff')
            background-repeat: no-repeat
            background-position: center 7px
            background-size: 12px
            .lm-m-attach-document-name
              display: block
              text-align: center
              box-sizing: border-box
              width: 100%
              @include lm-text-ellipsis
              font-size: 8px
              font-weight: 600
              line-height: 12px
              letter-spacing: 1px
              color: $lm-white
              text-transform: uppercase
              padding: 0 5px
              padding-top: 21px
          &.audio
            background-color: $lm-support-2
            background-repeat: no-repeat
            background-position: center
            background-size: 12px
            @include lm-music('%23ffffff')
          &.video
            .lm-m-dialog-attach-wrap
              overflow: hidden
              border-radius: 6px
              width: 48px
              height: 36px
            img
              border-radius: 6px
              width: 48px
              height: 36px
              object-fit: cover
              filter: blur(5px)
            i.lm-play-icon
              position: absolute
              z-index: 1
              display: block
              width: 12px
              height: 12px
              bottom: 0
              margin: auto
              top: 0
              left: 0
              right: 0
              @include lm-play('%23ffffff')
              background-repeat: no-repeat
              background-position: center
              background-size: 12px
          &.photo
            img
              border-radius: 6px
              width: 48px
              height: 36px
              object-fit: cover
      .lm-m-dialog-write
        padding: 12px 16px
        display: flex
        align-items: flex-start
        justify-content: flex-start
        border-top: 2px solid rgba(40, 42, 54, 0.05)
        .im_editable
          min-height: inherit
          margin: 0
          padding: 0
          word-break: break-word
          max-height: 66px
        .lm-m-dialog-show-actions
          display: flex
          align-items: center
          justify-content: flex-end
          align-self: flex-end
          min-width: 64px
          margin-left: 16px
          .dialog-attach
            label
              display: block
          > div + div
            margin-left: 16px
          i
            display: block
            cursor: pointer
            width: 24px
            height: 24px
            background-repeat: no-repeat
            background-position: center
            background-size: 20px
          .lm-attach-icon
            display: block
            cursor: pointer
            width: 24px
            height: 24px
            background-repeat: no-repeat
            background-position: center
            background-size: 20px
            &.lm-attach-icon.active
              @include lm-attach('%2320dba9')
            &.lm-attach-icon.disabled
              @include lm-attach('%23e0e0e0')
            &.lm-smile-icon.active
              @include lm-smile('%2320dba9')
          .input-upload-files-messages
            display: none
        .lm-input-wrap
          margin-bottom: 0
          flex: 1
          input
            margin: 0
            padding: 0
            height: 18px
            line-height: 18px
            border-radius: 0
            background: transparent
            border: 0 !important
            box-sizing: border-box
    .lm-m-dialog-body
      box-sizing: border-box
      //padding: 0 12px
      overflow-x: scroll
      -webkit-overflow-scrolling: touch
      width: 100%
      &.null
        height: 100%
      .mint-loadmore
      .mint-loadmore-content
      .lm-m-dialog-wrap-scroll
        height: 100%
      .lm-m-dialog-body--item
        padding: 0 12px
        &.null
          display: flex
          align-items: center
          justify-content: center
          height: 100%
        .lm-m-dialog-body--item-wrap
          position: relative
          .lm-m-dialog-border
            border-radius: 10px
            overflow: hidden
        &.error
          &.to
            .lm-m-dialog-body--item-wrap
              .error-icon
                right: -32px
          &.from
            .lm-m-dialog-body--item-wrap
              .error-icon
                left: -32px
          .lm-m-dialog-body--item-wrap
            .error-icon
              display: block
              width: 16px
              height: 16px
              @include lm-error()
              background-position: center
              background-repeat: no-repeat
              position: absolute
              bottom: 8px
            .date
              color: $lm-white !important
            .text
              color: $lm-white !important
              background-color: $lm-gray-4 !important
        &.to
          display: flex
          justify-content: flex-start
          .lm-m-dialog-body--item-wrap
            margin-top: 6px
            margin-bottom: 6px
            display: inline-block
            box-shadow: 2px 2px 4px 0 rgba(40, 42, 54, 0.03)
            .lm-m-dialog-border
              background-color: $lm-white
            .lm-m-dialog-body--item-document
              width: 214px
              padding: 8px
              background-color: $lm-white
              display: flex
              align-items: center
              justify-content: flex-start
              overflow: hidden
              padding-right: 40px
              box-sizing: border-box
              @media (min-width: 767px)
                width: 460px
              a
                display: flex
                align-items: center
                max-width: 100%
              i.lm-icon-square-download
                @include lm-square-download('%230063da')
                background-size: 10px
                background-color: $lm-gray-5
                border-radius: 50%
                margin-right: 12px
                display: block
                width: 28px
                min-width: 28px
                background-position: center
                background-repeat: no-repeat
                height: 28px
              .lm-m-dialog-body--item-name
                color: $lm-gray-1
                +lm-bold-content()
                +lm-text-ellipsis
            .text
              padding: 8px
              padding-right: 40px
              color: $lm-gray-1
              font-size: 14px
              word-break: break-word
              + img
                border-top-left-radius: 0
                border-top-right-radius: 0
              a
                color: $lm-main
                word-break: break-word
            .date
              color: $lm-gray-3
              +lm-micro()
              position: absolute
              bottom: 6px
              right: 6px
        &.from
          display: flex
          justify-content: flex-end
          .lm-m-dialog-body--item-wrap
            display: inline-block
            margin-top: 6px
            margin-bottom: 6px
            box-shadow: 2px 2px 4px 0 rgba(40, 42, 54, 0.03)
            .lm-m-dialog-border
              background-color: $lm-main
            .lm-m-dialog-body--item-document
              width: 214px
              padding: 8px
              background-color: $lm-main
              display: flex
              align-items: center
              justify-content: flex-start
              overflow: hidden
              padding-right: 40px
              box-sizing: border-box
              @media (min-width: 767px)
                width: 460px
              a
                display: flex
                align-items: center
                max-width: 100%
              i.lm-icon-square-download
                @include lm-square-download('%230063da')
                background-size: 10px
                background-color: $lm-white
                border-radius: 50%
                margin-right: 12px
                display: block
                width: 28px
                min-width: 28px
                background-position: center
                background-repeat: no-repeat
                height: 28px
              .lm-m-dialog-body--item-name
                color: $lm-white
                +lm-bold-content()
                +lm-text-ellipsis
            .text
              padding: 8px
              padding-right: 40px
              color: $lm-white
              font-size: 14px
              + img
                border-top-left-radius: 0
                border-top-right-radius: 0
              a
                color: $lm-white
                &.underline
                  text-decoration: underline
            .date
              opacity: 0.7
              color: $lm-white
              +lm-micro()
              position: absolute
              bottom: 6px
              right: 6px
        &.null
          text-align: center
          span
            font-size: 14px
            line-height: 18px
            color: $lm-gray-3
        &.date
          font-size: 12px
          line-height: 15px
          text-align: center
          color: $lm-gray-3
          position: relative
          width: 100%
          margin: 24px 0
          &:after
            width: 100%
            left: 0
            content: ''
            display: block
            position: absolute
            top: 0
            bottom: 0
            margin: auto
            height: 1px
            opacity: 0.7
            background-color: $lm-gray-4
            z-index: 1
          span
            position: relative
            z-index: 2
            padding: 0 12px
            background-color: $lm-gray-5
        &.not_read
          background: rgba(40, 42, 54, 0.08)


  .lm-m-messages--list
    width: 100%
    &.null
      display: flex
      align-items: center
      justify-content: center
      flex: 1 auto
      .lm-m-messages--null
        display: block
        width: 160px
        margin: auto
        text-align: center
        span
          margin-bottom: 12px
          display: block
          text-align: center
          +lm-body-content
          color: $lm-gray-3
          line-height: 18px
    .lm-m-messages--item
      padding: 12px 16px
      background-color: $lm-white
      box-shadow: 2px 0 0 0 rgba(40, 42, 54, 0.03), 0 2px 8px 0 rgba(40, 42, 54, 0.03)
      border-radius: 3px
      margin-bottom: 2px
      box-sizing: border-box
      width: 100%
      .lm-user-block
        width: 100%
        display: flex
        .lm-user-block-avatar-wrap
          min-width: 40px
          position: relative
          margin-right: 12px
          .lm-user-block-avatar-status
            width: 8px
            height: 8px
            border: solid 2px $lm-white
            position: absolute
            right: 0
            border-radius: 50%
            bottom: 0
            &.online
              background-color: $lm-support-2
            &.offline
              background-color: $lm-support-1

        .lm-user-block-avatar
            min-width: 40px
        .lm-user-block-info
          display: block
          flex: 1 1 auto
          width: 100%
          overflow: hidden
          .lm-m-messages--item-text
            display: flex
            align-items: center
            justify-content: space-between
            position: relative
            &.no-read
              &:before
                content: ''
                display: block
                width: 100%
                height: 100%
                position: absolute
                background: #f3f4f6
                border-radius: 5px
            .lm-my-avatar
              width: 16px
              height: 16px
              overflow: hidden
              border-radius: 50%
              margin-right: 8px
              object-fit: cover
              z-index: 1
              position: relative
            .lm-user-block-info-type, .typing
              height: 18px
              overflow: hidden
              display: block
              flex: 1 1 auto
              width: 100%
              margin-right: 16px
              z-index: 1
              position: relative
              +lm-text-ellipsis
            .typing
              font-size: 14px
              text-align: left
              color: #808792
              .typing-message
                display: inline-block
                margin-left: 6px
            .lm-m-messages--item-read
              .no-read
                width: 8px
                height: 8px
                border-radius: 10px
                background-color: $lm-main
          .lm-m-messages--item-name
            display: flex
            align-items: center
            justify-content: space-between
            .lm-user-block-info-name
              display: block
              flex: 1 1 auto
              width: 100%
              margin-right: 16px
              +lm-text-ellipsis
              span
                max-width: 100%
                +lm-text-ellipsis
            .lm-m-messages--item-date
              margin-left: auto
              flex-shrink: 0
              display: flex
              align-items: center
              +lm-micro
              opacity: 0.7
              color: $lm-gray-3

.typing
  .typing-message
    .bt
      animation: 1.1s linear 0s infinite typer
      display: inline-block
      vertical-align: middle
      background: #a9abad
      width: 4px
      height: 4px
      opacity: 0.2
      border-radius: 50%
      &:nth-child(2)
        animation-delay: 0.36666667s
      &:nth-child(3)
        animation-delay: 0.73333333s
